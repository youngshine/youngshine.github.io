<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <meta name="author" content="yqizo"/>
    <title>同学会照片集</title>
    <!-- 引入样式 
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@nutui/nutui@2.1.2/dist/nutui.min.css">  -->
    <style>
      body {
        background:#333;
      }
      /* loading文字 */
      #loadingPage {
        position: absolute;
        left:0;top:0;
        width:100%;height:100%;
        background: #333;
        text-align:center;
        z-index: 999;
      }
      /* loading图片居中  */
      #loadingImg {
        position: absolute;
        margin: auto;
        left: 0; right: 0; top: 0; bottom: 0;
        width:50px;height:50px;
      }

      /* 圣杯布局 */
      .HolyGrail {
        display: flex;
        /* min-height: 100vh;  */
        flex-direction: column;
      }
      
      .HolyGrail-body {
        display: flex;
        flex: 1;
      }
      
      .HolyGrail-content {
        flex: 1;
      }
      
      .HolyGrail-nav  {
        /* 两个边栏的宽度设为12em */
        width: 80px;
        color: #fff;
        padding: 0 5px;
        font-size: 0.8em;
      }
      
      .HolyGrail-nav {
        /* 导航放到最左边 */
        order: -1;
      }


      .parent {
        width: 100%;
        height: 100%;
        /* background-color: grey; */
        display: flex;
        flex-flow: row wrap;
        align-content: flex-start;
      }
      
      .child {
        box-sizing: border-box;
        /* background-color: white; */
        /* flex: 0 0 25%; */
        width: 80px; height:60px;
        border: 4px solid #333;
      }

    </style>

  <script>
    // 图片加载成功时触发load事件，失败不会触发
    document.addEventListener("load", function (event) {
      var ev = event ? event : window.event;
      var elem = ev.target;
      if (elem.tagName.toLowerCase() == 'img') {  
        //  图片加载成功 do something...
        console.log('img loaded')
        setTimeout("removeLoading()",1000);
        //document.getElementById('arrow').style.display = "block"
        //document.getElementById('desc').style.display = "block"
      }
    }, true);

    function removeLoading(){
      document.getElementById('loadingPage').style.display = "none"
    }
  </script>
</head>
<body>
  	<div id="loadingPage">
      <!-- 
      <div id="appLoadingIndicator">正在加载...</div> -->
      <img id="loadingImg" src="./images/loading.gif" />
    </div>

    <div id="app"></div>

    <!-- 引入Vue -->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
    <!-- 引入NutUI组件库 
    <script src="https://cdn.jsdelivr.net/npm/@nutui/nutui@2.1.2/dist/nutui.min.js"></script>
    -->
    <script src="app.js"></script>

    <script>
      // 微信浏览器内点击放大图片
			document.addEventListener('click',function(e){
				console.log(e.target)
        if(!e.target.src) return
				var thumbUrl = e.target.src
        var imgUrl = thumbUrl.replace('/thumb','');
        var imgPath = thumbUrl.substr(0,thumbUrl.indexOf('thumb'))
        //console.log(imgPath)
        var arr = [];
        arr.push(imgPath+'001.jpg')
        arr.push(imgPath+'002.jpg')
        arr.push(imgPath+'003.jpg')
        arr.push(imgPath+'004.jpg')
        arr.push(imgPath+'005.jpg')
        arr.push(imgPath+'006.jpg')
        arr.push(imgPath+'007.jpg')
        arr.push(imgPath+'008.jpg')
        arr.push(imgPath+'009.jpg')
        arr.push(imgPath+'010.jpg')
        arr.push(imgPath+'011.jpg')
        arr.push(imgPath+'012.jpg')
        arr.push(imgPath+'013.jpg')
        arr.push(imgPath+'014.jpg')
        arr.push(imgPath+'015.jpg')
        arr.push(imgPath+'016.jpg')
        arr.push(imgPath+'017.jpg')
        arr.push(imgPath+'018.jpg')
        console.log('current: ',imgUrl)
        console.log('arr: ',arr) //[imgUrl]  
				WeixinJSBridge.invoke('imagePreview', {  
					'current' : imgUrl,  
					'urls'    : arr 
				});
			})
    </script>

</body>
</html>
